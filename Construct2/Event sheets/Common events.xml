<?xml version="1.0" encoding="utf-8" ?>
<c2eventsheet>
    <!--All the 'name' attributes are ignored by Construct 2 - they are there for readability only.-->
    <name>Common events</name>
    <events>
        <variable constant="0" name="selectedOpponent" sid="197833312860567" static="0" type="number">-1</variable>
        <event-block sid="698000686215690">
            <conditions>
                <condition id="-2" name="On start of layout" sid="565233590034751" type="System" />
            </conditions>
            <actions>
                <action id="0" name="Set selection" sid="481490856780396" type="SelectOpponent">
                    <param id="0" name="Index">selectedOpponent</param>
                </action>
            </actions>
        </event-block>
        <event-block sid="333579995380634">
            <conditions>
                <condition id="-6" name="Every X seconds" sid="214696229069030" type="System">
                    <param id="0" name="Interval (seconds)">1.0</param>
                </condition>
            </conditions>
            <actions>
                <action id="0" name="Set text" sid="820518555565540" type="YourAccount">
                    <param id="0" name="Text">&quot;Your account:&quot; &amp; newline &amp; Ethereum.CurrentAccount</param>
                </action>
            </actions>
        </event-block>
        <event-block sid="220687192454267">
            <conditions>
                <condition id="1" name="On selection changed" sid="612871336892752" type="SelectOpponent" />
            </conditions>
            <actions>
                <action id="0" name="Call function" sid="389535168642741" type="Function">
                    <param id="0" name="Name">&quot;UpdateUI&quot;</param>
                    <param id="1" name="Parameter {n}"></param>
                </action>
                <action id="-9" name="Set value" sid="802278028417653" type="System">
                    <param id="0" name="Variable">selectedOpponent</param>
                    <param id="1" name="Value">SelectOpponent.SelectedIndex</param>
                </action>
            </actions>
        </event-block>
        <event-block sid="674497081804492">
            <conditions>
                <condition id="0" name="On function" sid="668107778441083" type="Function">
                    <param id="0" name="Name">&quot;UpdateUI&quot;</param>
                </condition>
            </conditions>
            <actions>
                <action id="0" name="Call function" sid="152277076868570" type="Function">
                    <param id="0" name="Name">&quot;Log&quot;</param>
                    <param id="1" name="Parameter {n}">&quot;Update UI&quot;</param>
                </action>
            </actions>
            <sub-events>
                <event-block sid="872167755163082">
                    <conditions>
                        <condition id="0" name="Compare selection" sid="967489056580094" type="SelectOpponent">
                            <param id="0" name="Comparison">0</param>
                            <param id="1" name="Index">SelectOpponent.ItemCount-1</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Call function" sid="162156225448765" type="Function">
                            <param id="0" name="Name">&quot;Log&quot;</param>
                            <param id="1" name="Parameter {n}">&quot;Create Game&quot;</param>
                        </action>
                        <action id="-2" name="Go to layout" sid="581320692081647" type="System">
                            <param id="0" name="Layout">CreateGame</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="483242571518691">
                    <conditions>
                        <condition id="-22" name="Else" sid="834584495053110" type="System" />
                    </conditions>
                    <actions>
                        <action id="0" name="Call function" sid="208718608543793" type="Function">
                            <param id="0" name="Name">&quot;Log&quot;</param>
                            <param id="1" name="Parameter {n}">&quot;Select Game&quot;</param>
                        </action>
                        <action id="0" name="Call" sid="439622923675912" type="Ethereum">
                            <param id="0" name="Name with parameters types">&quot;GetGameState&quot;</param>
                            <param id="1" name="Parameters">SelectOpponent.SelectedText</param>
                            <param id="2" name="Callback id">&quot;GetGameState&quot;</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-block>
        <event-block sid="100151342795596">
            <conditions>
                <condition id="1" name="On function success" sid="435879725181653" type="Ethereum">
                    <param id="0" name="ID">&quot;GetGameState&quot;</param>
                </condition>
            </conditions>
            <actions>
                <action id="0" name="Call function" sid="624942126230670" type="Function">
                    <param id="0" name="Name">&quot;Log&quot;</param>
                    <param id="1" name="Parameter {n}">&quot;On GetGameState Success, response: &quot; &amp;  Ethereum.CurrentCallbackResponse</param>
                </action>
            </actions>
            <sub-events>
                <event-block sid="196159880483612">
                    <conditions>
                        <condition id="-8" name="Compare two values" sid="500632132906677" type="System">
                            <param id="0" name="First value">int(tokenat(Ethereum.CurrentCallbackResponse,0,&quot;,&quot;))</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Second value">1</param>
                        </condition>
                        <condition id="-8" name="Compare two values" sid="732648406622165" type="System">
                            <param id="0" name="First value">int(tokenat(Ethereum.CurrentCallbackResponse,1,&quot;,&quot;))</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Second value">1</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Call function" sid="583457800527855" type="Function">
                            <param id="0" name="Name">&quot;Log&quot;</param>
                            <param id="1" name="Parameter {n}">&quot;Answer Game&quot;</param>
                        </action>
                        <action id="-2" name="Go to layout" sid="458346741021658" type="System">
                            <param id="0" name="Layout">AnswerGame</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="221670056839849">
                    <conditions>
                        <condition id="-8" name="Compare two values" sid="103147120433053" type="System">
                            <param id="0" name="First value">int(tokenat(Ethereum.CurrentCallbackResponse, 0, &quot;,&quot;))</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Second value">2</param>
                        </condition>
                        <condition id="-8" name="Compare two values" sid="369093743617785" type="System">
                            <param id="0" name="First value">int(tokenat(Ethereum.CurrentCallbackResponse,1,&quot;,&quot;))</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Second value">1</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Call function" sid="951530598705028" type="Function">
                            <param id="0" name="Name">&quot;Log&quot;</param>
                            <param id="1" name="Parameter {n}">&quot;Reveal Game&quot;</param>
                        </action>
                        <action id="-2" name="Go to layout" sid="624360751567216" type="System">
                            <param id="0" name="Layout">RevealGame</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="691606080887060">
                    <conditions>
                        <condition id="-8" name="Compare two values" sid="576509238728743" type="System">
                            <param id="0" name="First value">int(tokenat(Ethereum.CurrentCallbackResponse,0,&quot;,&quot;))</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Second value">1</param>
                        </condition>
                        <condition id="-8" name="Compare two values" sid="351595157672776" type="System">
                            <param id="0" name="First value">int(tokenat(Ethereum.CurrentCallbackResponse,1,&quot;,&quot;))</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Second value">2</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Call function" sid="616907945871831" type="Function">
                            <param id="0" name="Name">&quot;Log&quot;</param>
                            <param id="1" name="Parameter {n}">&quot;Answer Game&quot;</param>
                        </action>
                        <action id="-2" name="Go to layout" sid="218218514456869" type="System">
                            <param id="0" name="Layout">WaitingForOpponentAnswer</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="987097981795593">
                    <conditions>
                        <condition id="-8" name="Compare two values" sid="433577743359885" type="System">
                            <param id="0" name="First value">int(tokenat(Ethereum.CurrentCallbackResponse, 0, &quot;,&quot;))</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Second value">2</param>
                        </condition>
                        <condition id="-8" name="Compare two values" sid="252085228377640" type="System">
                            <param id="0" name="First value">int(tokenat(Ethereum.CurrentCallbackResponse,1,&quot;,&quot;))</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Second value">2</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Call function" sid="961920901035417" type="Function">
                            <param id="0" name="Name">&quot;Log&quot;</param>
                            <param id="1" name="Parameter {n}">&quot;Reveal Game&quot;</param>
                        </action>
                        <action id="-2" name="Go to layout" sid="633568320218137" type="System">
                            <param id="0" name="Layout">WaitingForOpponentReveal</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-block>
        <event-block sid="437463315201790">
            <conditions>
                <condition id="0" name="On function" sid="642726145559401" type="Function">
                    <param id="0" name="Name">&quot;Log&quot;</param>
                </condition>
            </conditions>
            <actions>
                <action id="14" name="Log" sid="336247933609899" type="Browser">
                    <param id="0" name="Type">0</param>
                    <param id="1" name="Message">Function.Param(0)</param>
                </action>
                <action id="0" name="Set text" sid="937994152899515" type="Console">
                    <param id="0" name="Text">Function.Param(0)</param>
                </action>
                <action id="-16" name="Wait" sid="530093650031787" type="System">
                    <param id="0" name="Seconds">1.0</param>
                </action>
                <action id="0" name="Set text" sid="202816413908379" type="Console">
                    <param id="0" name="Text">&quot;&quot;</param>
                </action>
            </actions>
        </event-block>
        <event-block sid="297558479420558">
            <conditions>
                <condition id="0" name="On function" sid="538490453850835" type="Function">
                    <param id="0" name="Name">&quot;UpdateOpponentList&quot;</param>
                </condition>
            </conditions>
            <actions>
                <action id="0" name="Call" sid="312374356873888" type="Ethereum">
                    <param id="0" name="Name with parameters types">&quot;GetPlayersInteracting&quot;</param>
                    <param id="1" name="Parameters">&quot;&quot;</param>
                    <param id="2" name="Callback id">&quot;GetPlayersInteracting&quot;</param>
                </action>
            </actions>
        </event-block>
        <event-block sid="222578660364137">
            <conditions>
                <condition id="1" name="On function success" sid="541762449363318" type="Ethereum">
                    <param id="0" name="ID">&quot;GetPlayersInteracting&quot;</param>
                </condition>
            </conditions>
            <actions>
                <action id="11" name="Clear" sid="542589014686460" type="SelectOpponent" />
            </actions>
            <sub-events>
                <event-block sid="760111830365491">
                    <conditions>
                        <condition id="-10" name="For" sid="328216332433471" type="System">
                            <param id="0" name="Name">&quot;ForAllOpponents&quot;</param>
                            <param id="1" name="Start index">0</param>
                            <param id="2" name="End index">tokencount(Ethereum.CurrentCallbackResponse, &quot;,&quot;) - 1</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="7" name="Add item" sid="467987404740198" type="SelectOpponent">
                            <param id="0" name="Text">tokenat(Ethereum.CurrentCallbackResponse,loopindex, &quot;,&quot;)</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="207374434251633">
                    <conditions>
                        <condition id="-1" name="Every tick" sid="122408814155476" type="System" />
                    </conditions>
                    <actions>
                        <action id="7" name="Add item" sid="734434362693774" type="SelectOpponent">
                            <param id="0" name="Text">&quot;Create New Game&quot;</param>
                        </action>
                        <action disabled="1" id="0" name="Set selection" sid="825000848199581" type="SelectOpponent">
                            <param id="0" name="Index">SelectOpponent.currentSelection</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-block>
    </events>
</c2eventsheet>
